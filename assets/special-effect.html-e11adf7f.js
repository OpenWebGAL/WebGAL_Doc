import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as n,d as e}from"./app-412530c8.js";const l={},p=e(`<h1 id="エフェクト" tabindex="-1"><a class="header-anchor" href="#エフェクト" aria-hidden="true">#</a> エフェクト</h1><p>現在、WebGAL のエフェクトシステムは PixiJS で実装されています。</p><h2 id="エフェクトを使用する" tabindex="-1"><a class="header-anchor" href="#エフェクトを使用する" aria-hidden="true">#</a> エフェクトを使用する</h2><h3 id="pixi-を初期化する" tabindex="-1"><a class="header-anchor" href="#pixi-を初期化する" aria-hidden="true">#</a> Pixi を初期化する</h3><p><code>pixiInit</code> を使用して Pixi を初期化します。</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#8BE9FD;">pixiInit</span><span style="color:#6272A4;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>エフェクトを使用する場合は、このコマンドを最初に実行して Pixi を初期化する必要があります。</p><p>すでに適用されているエフェクトを消去したい場合は、この構文を使用してエフェクトをクリアできます。</p></div><h3 id="エフェクトを追加する" tabindex="-1"><a class="header-anchor" href="#エフェクトを追加する" aria-hidden="true">#</a> エフェクトを追加する</h3><p><code>pixiPerform</code> を使用してエフェクトを追加します。</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#8BE9FD;">pixiPerform</span><span style="color:#FF5555;">:</span><span style="color:#F8F8F2;">rain</span><span style="color:#6272A4;">; // 雨のエフェクトを追加する</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>注意：エフェクトを適用した後、再度初期化しないと、エフェクトは常に実行されます。</p><h3 id="プリセットエフェクト一覧" tabindex="-1"><a class="header-anchor" href="#プリセットエフェクト一覧" aria-hidden="true">#</a> プリセットエフェクト一覧</h3><table><thead><tr><th style="text-align:left;">エフェクト</th><th style="text-align:left;">コマンド</th></tr></thead><tbody><tr><td style="text-align:left;">雨</td><td style="text-align:left;">pixiPerform:rain;</td></tr><tr><td style="text-align:left;">雪</td><td style="text-align:left;">pixiPerform:snow;</td></tr><tr><td style="text-align:left;">大雪</td><td style="text-align:left;">pixiPerform:heavySnow;</td></tr><tr><td style="text-align:left;">桜</td><td style="text-align:left;">pixiPerform:cherryBlossoms;</td></tr></tbody></table><h3 id="エフェクトを重ねる" tabindex="-1"><a class="header-anchor" href="#エフェクトを重ねる" aria-hidden="true">#</a> エフェクトを重ねる</h3><p>2 つ以上エフェクトを重ねたい場合は、<code>pixiInit</code> コマンドを使用せずに異なるエフェクトを重ねることができます。</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#8BE9FD;">pixiPerform</span><span style="color:#FF5555;">:</span><span style="color:#F8F8F2;">rain</span><span style="color:#6272A4;">;</span></span>
<span class="line"><span style="color:#8BE9FD;">pixiPerform</span><span style="color:#FF5555;">:</span><span style="color:#F8F8F2;">snow</span><span style="color:#6272A4;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="重ねたエフェクトをクリアする" tabindex="-1"><a class="header-anchor" href="#重ねたエフェクトをクリアする" aria-hidden="true">#</a> 重ねたエフェクトをクリアする</h3><p><code>pixiInit</code> を使用して初期化します。これにより、適用されているすべてエフェクトを消去できます。</p><h2 id="カスタムエフェクトを追加する" tabindex="-1"><a class="header-anchor" href="#カスタムエフェクトを追加する" aria-hidden="true">#</a> カスタムエフェクトを追加する</h2><p>ソースコードをダウンロードして <code>/Core/gameScripts/pixiPerformScripts/</code> に移動し、必要なエフェクトを作成するために <code>PIXI.Container</code> を新規作成します。</p><p>エフェクトコンテナは前景コンテナと背景コンテナに分割され、ここでは前景コンテナを例としています。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#6272A4;">// 現在の Pixi エフェクト Container を取得する</span></span>
<span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> effectsContainer </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> WebGAL.gameplay.pixiStage</span><span style="color:#FF79C6;">!</span><span style="color:#F8F8F2;">.foregroundEffectsContainer</span><span style="color:#FF79C6;">!</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#6272A4;">// Pixi App の呼び出し方法で、画面のサイズなどを決定するのに役立ちます</span></span>
<span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> app </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">RUNTIME_GAMEPLAY</span><span style="color:#F8F8F2;">.pixiStage</span><span style="color:#FF79C6;">!</span><span style="color:#F8F8F2;">.currentApp</span><span style="color:#FF79C6;">!</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"><span style="color:#6272A4;">// カスタムエフェクトのコンテナを作成する</span></span>
<span class="line"><span style="color:#FF79C6;">const</span><span style="color:#F8F8F2;"> container </span><span style="color:#FF79C6;">=</span><span style="color:#F8F8F2;"> </span><span style="color:#FF79C6;font-weight:bold;">new</span><span style="color:#F8F8F2;"> </span><span style="color:#BD93F9;">PIXI</span><span style="color:#F8F8F2;">.</span><span style="color:#50FA7B;">Container</span><span style="color:#F8F8F2;">();</span></span>
<span class="line"><span style="color:#6272A4;">// エフェクトを追加する</span></span>
<span class="line"><span style="color:#F8F8F2;">effectsContainer.</span><span style="color:#50FA7B;">addChild</span><span style="color:#F8F8F2;">(container);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>テクスチャ ファイルは <code>game/tex</code> ディレクトリに配置できます。</p><p>次に、ファイルの先頭で <code>エフェクト登録メソッド</code> をインポートして、新しく記述したエフェクトを登録します。</p><p>ファイルの末尾で登録したエフェクトを使用します。最初のパラメータはエフェクト名、2 番目のパラメータはエフェクトを呼び出すメソッドです。</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#FF79C6;">import</span><span style="color:#F8F8F2;"> {registerPerform} </span><span style="color:#FF79C6;">from</span><span style="color:#F8F8F2;"> </span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">../pixiPerformManager</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">// これがエフェクトだと仮定します</span></span>
<span class="line"><span style="color:#FF79C6;">function</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">myPerform</span><span style="color:#F8F8F2;">() {</span></span>
<span class="line"><span style="color:#F8F8F2;">    </span><span style="color:#6272A4;">// ...</span></span>
<span class="line"><span style="color:#F8F8F2;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4;">// 登録する</span></span>
<span class="line"><span style="color:#50FA7B;">registerPerform</span><span style="color:#F8F8F2;">(</span><span style="color:#E9F284;">&#39;</span><span style="color:#F1FA8C;">myPerform</span><span style="color:#E9F284;">&#39;</span><span style="color:#F8F8F2;">, { </span><span style="color:#50FA7B;">fg</span><span style="color:#FF79C6;">:</span><span style="color:#F8F8F2;"> () </span><span style="color:#FF79C6;">=&gt;</span><span style="color:#F8F8F2;"> </span><span style="color:#50FA7B;">myPerform</span><span style="color:#F8F8F2;">(パラメータ) });</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最後に、カスタムエフェクトをサポートする WebGAL をコンパイルします。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#50FA7B;">yarn</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">run</span><span style="color:#F8F8F2;"> </span><span style="color:#F1FA8C;">build</span><span style="color:#F8F8F2;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>これで、スクリプトでエフェクトを呼び出すことができます。</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="shiki dracula" style="background-color:#282A36;" tabindex="0"><code><span class="line"><span style="color:#8BE9FD;">pixiPerform</span><span style="color:#FF5555;">:</span><span style="color:#F8F8F2;">myPerform</span><span style="color:#6272A4;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,30),i=[p];function o(r,t){return a(),n("div",null,i)}const F=s(l,[["render",o],["__file","special-effect.html.vue"]]);export{F as default};
