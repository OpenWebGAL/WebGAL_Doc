import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as s,d as a}from"./app-ca49afd6.js";const t={},i=a(`<h1 id="special-effect" tabindex="-1"><a class="header-anchor" href="#special-effect" aria-hidden="true">#</a> Special effect</h1><h2 id="use-special-effect" tabindex="-1"><a class="header-anchor" href="#use-special-effect" aria-hidden="true">#</a> Use special effect</h2><p>Currently, WebGAL&#39;s effect system is implemented by PixiJS.</p><h3 id="initialize-pixi" tabindex="-1"><a class="header-anchor" href="#initialize-pixi" aria-hidden="true">#</a> Initialize Pixi</h3><p>Use <code>pixiInit</code> to initialize Pixi.</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="language-ws"><code>pixiInit; 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">Note</p><p>If you want to use effects, you must run this command first to initialize Pixi.</p><p>If you want to eliminate the effects that have been applied, you can use this syntax to clear the effects.</p></div><h4 id="add-effects" tabindex="-1"><a class="header-anchor" href="#add-effects" aria-hidden="true">#</a> Add effects</h4><p>Use <code>pixiPerform</code> to add effects.</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="language-ws"><code>pixiPerform:rain; // Add a raining effect
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Note: After the effect is applied, it will keep running if not initialized.</p><h3 id="list-of-preset-effects" tabindex="-1"><a class="header-anchor" href="#list-of-preset-effects" aria-hidden="true">#</a> List of preset effects</h3><table><thead><tr><th style="text-align:left;">Effect</th><th style="text-align:left;">Command</th></tr></thead><tbody><tr><td style="text-align:left;">Rain</td><td style="text-align:left;">pixiPerform:rain;</td></tr><tr><td style="text-align:left;">Snow</td><td style="text-align:left;">pixiPerform:snow;</td></tr><tr><td style="text-align:left;">Cherry Blossoms</td><td style="text-align:left;">pixiPerform:cherryBlossoms;</td></tr></tbody></table><h3 id="superimpose-effects" tabindex="-1"><a class="header-anchor" href="#superimpose-effects" aria-hidden="true">#</a> Superimpose effects</h3><p>If you want to superimpose two or more effects, you can superimpose different effects without using the <code>pixiInit</code> command.</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="language-ws"><code>pixiPerform:rain;
pixiPerform:snow;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="clear-superimposed-effects" tabindex="-1"><a class="header-anchor" href="#clear-superimposed-effects" aria-hidden="true">#</a> Clear superimposed effects</h3><p>Use <code>pixiInit</code> to initialize, this can eliminate all effects that have been applied.</p><h2 id="add-custom-effects" tabindex="-1"><a class="header-anchor" href="#add-custom-effects" aria-hidden="true">#</a> Add custom effects</h2><p>You can download the source code, then find <code>/Core/gameScripts/pixiPerformScripts/</code>, then create a <code>PIXI.Container</code> for the effect you need.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// Get the current Pixi effect Container</span>
<span class="token keyword">const</span> effectsContainer <span class="token operator">=</span> <span class="token constant">RUNTIME_GAMEPLAY</span><span class="token punctuation">.</span>pixiStage<span class="token operator">!</span><span class="token punctuation">.</span>effectsContainer<span class="token operator">!</span><span class="token punctuation">;</span>
<span class="token comment">// Way to call Pixi App, may be useful for determining screen size, etc.</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token constant">RUNTIME_GAMEPLAY</span><span class="token punctuation">.</span>pixiStage<span class="token operator">!</span><span class="token punctuation">.</span>currentApp<span class="token operator">!</span><span class="token punctuation">;</span>
<span class="token comment">// Create container for custom effects</span>
<span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">PIXI</span></span><span class="token punctuation">.</span><span class="token function">Container</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Add effects</span>
effectsContainer<span class="token punctuation">.</span><span class="token function">addChild</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Texture files can be placed in the <code>game/tex</code> directory.</p><p>Then, at the beginning of the file, import <code>the effect registration method</code> to register your new effect.</p><p>At the end of the file, use it to register your effect. The first parameter is the effect name, and the second is the method to call the effect.</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>registerPerform<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../pixiPerformManager&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// Assume this is your effect  </span>
<span class="token keyword">function</span> <span class="token function">myPerform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// Register</span>
<span class="token function">registerPerform</span><span class="token punctuation">(</span><span class="token string">&#39;myPerform&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">myPerform</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally, compile the WebGAL that supports your custom effects</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> run build<span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Now you can call your effects in the script</p><div class="language-ws line-numbers-mode" data-ext="ws"><pre class="language-ws"><code>pixiPerform:your new effect;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,29),c=[i];function o(p,r){return n(),s("div",null,c)}const u=e(t,[["render",o],["__file","special-effect.html.vue"]]);export{u as default};
