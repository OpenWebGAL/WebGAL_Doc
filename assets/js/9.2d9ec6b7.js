(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{422:function(t,a,s){"use strict";s.r(a);var e=s(62),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"webgal-游戏开发指引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webgal-游戏开发指引"}},[t._v("#")]),t._v(" WebGAL 游戏开发指引")]),t._v(" "),s("h2",{attrs:{id:"如何开始制作-webgal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何开始制作-webgal"}},[t._v("#")]),t._v(" 如何开始制作 WebGAL？")]),t._v(" "),s("h3",{attrs:{id:"方法1-推荐-使用-webgal-编辑器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法1-推荐-使用-webgal-编辑器"}},[t._v("#")]),t._v(" 方法1（推荐）：使用 WebGAL 编辑器")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MakinoharaShoko/WebGAL_Terre/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebGAL 编辑器"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("如果下载速度过慢，请尝试通过蓝奏云网盘下载，"),s("strong",[t._v("请注意！版本不一定是最新的。")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://wwrl.lanzouw.com/icMH70hsozxi",target:"_blank",rel:"noopener noreferrer"}},[t._v("蓝奏云"),s("OutboundLink")],1),t._v(" 密码:ezom")]),t._v(" "),s("h3",{attrs:{id:"方法2-在本地通过书写脚本的形式开发-并实时调试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法2-在本地通过书写脚本的形式开发-并实时调试"}},[t._v("#")]),t._v(" 方法2：在本地通过书写脚本的形式开发，并实时调试")]),t._v(" "),s("p",[t._v("首先，下载已经被构建为静态网页的 WebGAL 发行版以及配套的调试环境。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/MakinoharaShoko/WebGAL/releases/",target:"_blank",rel:"noopener noreferrer"}},[t._v("发行版"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("如果下载速度过慢，请尝试通过蓝奏云网盘下载，"),s("strong",[t._v("请注意！版本不一定是最新的。")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://wwt.lanzouw.com/ijubC0g8izng",target:"_blank",rel:"noopener noreferrer"}},[t._v("蓝奏云"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("现在，你可以直接运行对应版本的 WebGAL-server 开始调试你的视觉小说。如果遇到杀毒软件拦截或防火墙拦截等情况，请放行以允许该程序运行。")]),t._v(" "),s("h3",{attrs:{id:"如何将我的-galgame-部署到互联网上-并使他人能够访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何将我的-galgame-部署到互联网上-并使他人能够访问"}},[t._v("#")]),t._v(" 如何将我的 Galgame 部署到互联网上，并使他人能够访问？")]),t._v(" "),s("p",[t._v("首先，请知悉，可以部署到互联网的引擎应该是"),s("strong",[t._v("发行版或由 WebGAL 图形化编辑器导出的网页")]),t._v("，而不是源代码。")]),t._v(" "),s("p",[t._v("如果你使用编辑器：")]),t._v(" "),s("p",[t._v("在编辑器右上角选择导出为网页或可执行文件。可执行文件可以直接在 Windows 上运行，而网页的部署方式，与部署一个正常网站的方式无异。你可以购买云服务器（腾讯云、阿里云）等部署或使用 GitHub Pages。")]),t._v(" "),s("p",[t._v("如果你使用发行版：")]),t._v(" "),s("p",[t._v("复制/WebGAL 下的文件(不是文件夹，是/WebGAL 文件夹下的文件)到你想要部署的云服务器的指定目录下，或是部署到 GitHub Pages。")]),t._v(" "),s("p",[s("strong",[t._v("使用源代码开发的开发者：")])]),t._v(" "),s("p",[t._v("如果你使用源代码进行调试，你可以通过 npm run build 或 yarn build 来创建一个静态网页（在/dist 文件夹），然后将这个文件夹内的内容部署到 GitHub Pages 或你的云服务器上。")]),t._v(" "),s("h1",{attrs:{id:"游戏制作快速上手教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#游戏制作快速上手教程"}},[t._v("#")]),t._v(" 游戏制作快速上手教程")]),t._v(" "),s("p",[t._v("现在，你应该已经运行起来了一个调试服务器，接下来介绍如何编写你自己的剧本")]),t._v(" "),s("p",[t._v("你应该能够发现，在解压后的文件夹下，有一个 WebGAL 文件夹，在 WebGAL 文件夹下，有一个 game 文件夹，那就是你的游戏资源应该存放的地方。")]),t._v(" "),s("p",[t._v("你的所有游戏剧本、图片、立绘都应该在放解压后目录的 WebGAL/game 文件夹下，目录对应的资源说明如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("文件夹")]),t._v(" "),s("th",[t._v("存放的资源")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("animation")]),t._v(" "),s("td",[t._v("动画描述文件")])]),t._v(" "),s("tr",[s("td",[t._v("background")]),t._v(" "),s("td",[t._v("用于存放背景图片、标题页背景")])]),t._v(" "),s("tr",[s("td",[t._v("figure")]),t._v(" "),s("td",[t._v("用于存放人物立绘")])]),t._v(" "),s("tr",[s("td",[t._v("scene")]),t._v(" "),s("td",[t._v("用于存放用户剧本")])]),t._v(" "),s("tr",[s("td",[t._v("bgm")]),t._v(" "),s("td",[t._v("用于存放背景音乐")])]),t._v(" "),s("tr",[s("td",[t._v("vocal")]),t._v(" "),s("td",[t._v("用于存放配音文件")])]),t._v(" "),s("tr",[s("td",[t._v("video")]),t._v(" "),s("td",[t._v("用于存放视频")])]),t._v(" "),s("tr",[s("td",[t._v("tex")]),t._v(" "),s("td",[t._v("用于存放特效纹理文件")])])])]),t._v(" "),s("h2",{attrs:{id:"定制你的游戏信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定制你的游戏信息"}},[t._v("#")]),t._v(" 定制你的游戏信息")]),t._v(" "),s("p",[t._v("在/game 文件夹下，有一个文件 config.txt，你可以在这个文件中填写你游戏的相关信息：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Game_name:WebGAL;//你的游戏名称\nGame_key:0f33fdGr;//一串识别码，你应该尽可能随机地输入一串不容易与别人重复的字符，长度最好在6-10字符之间，否则可能会引发bug\nTitle_img:Title2.png;//标题的图片名称，图片放在/background 文件夹\nTitle_bgm:夏影.mp3;//标题的背景音乐，音乐文件应该放在/bgm文件夹\n")])])]),s("h2",{attrs:{id:"注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注释"}},[t._v("#")]),t._v(" 注释")]),t._v(" "),s("p",[t._v("WebGAL的脚本只会解析每一行的分号前的内容，因此分号后的内容会被视作注释")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("WebGAL:你好！; （分号后的内容会被视作注释）\n;可以直接输入一个分号，然后写一条单行注释\n")])])]),s("h2",{attrs:{id:"next-参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#next-参数"}},[t._v("#")]),t._v(" "),s("code",[t._v("-next")]),t._v(" 参数")]),t._v(" "),s("p",[t._v("你可以在任意语句后加上参数 "),s("code",[t._v("-next")]),t._v("，这样做可以在执行完本条语句后立刻跳转到下一条语句。这对需要在同一时间内执行多步操作非常有用。")]),t._v(" "),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeBg:testBG03.jpg -next; 会立刻执行下一条语句\n")])])]),s("h2",{attrs:{id:"用户剧本的编写语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户剧本的编写语法"}},[t._v("#")]),t._v(" 用户剧本的编写语法")]),t._v(" "),s("p",[t._v("首先，程序会从"),s("strong",[t._v("初始脚本")]),s("code",[t._v("start.txt")]),t._v("开始运行，在后续的脚本编写中，会介绍如何跳转章节或设置分支选项。")]),t._v(" "),s("p",[s("strong",[t._v("编写剧本的方式非常简单，且与自然语言几乎无异。")])]),t._v(" "),s("h3",{attrs:{id:"基本人物对话"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本人物对话"}},[t._v("#")]),t._v(" 基本人物对话")]),t._v(" "),s("p",[t._v("首先，使用记事本或 VS Code 、sublime 等文本编辑器，打开游戏资源目录下 scene 文件夹中的 start.txt，然后你就可以开始编写你的第一条对话了。")]),t._v(" "),s("p",[t._v("编写人物对话的方法非常简单，你只需要输入：")]),t._v(" "),s("p",[s("strong",[t._v("注意，每条对话的冒号、分号应当为英文字符！")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("人物:对话;\n")])])]),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("雪之下雪乃:请用茶;\n由比滨:啊，谢谢;\n小町:谢谢雪乃姐！;\n一色:谢谢学姐。;\n")])])]),s("p",[t._v("在每条对话/剧本后，使用分号作为结束。（如果不写分号有时候也行，但是作者还是建议加上分号以防止 bug）。")]),t._v(" "),s("h4",{attrs:{id:"连续对话"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#连续对话"}},[t._v("#")]),t._v(" 连续对话")]),t._v(" "),s("p",[t._v("如果你的多条对话没有改变人物名称，你可以使用连续对话，而可以省略人物名称，再在你需要的时候使用：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("雪之下雪乃:你到得真早;\n对不起，等很久了吗？;//此时，对话的人物名称仍然是“雪之下雪乃”。\n比企谷八幡:刚到而已;\n")])])]),s("h4",{attrs:{id:"旁白"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#旁白"}},[t._v("#")]),t._v(" 旁白")]),t._v(" "),s("p",[t._v("如果你想要创建没有人物名称的旁白对话，请在冒号前留空（但不能省去冒号）：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(":这是一句旁白;\n")])])]),s("h3",{attrs:{id:"在显示对话时同时播放语音"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在显示对话时同时播放语音"}},[t._v("#")]),t._v(" 在显示对话时同时播放语音")]),t._v(" "),s("p",[t._v("众所周知，Galgame 最吸引人的地方往往在于其有优秀的配音。在此版本中，你可以为对话引入配音了，将你的配音放入 vocal\n文件夹，然后在参数加上语音文件名即可引入，语法示例如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("比企谷八幡:刚到而已 -V3.ogg;\n")])])]),s("p",[t._v("在连续对话时，语音的引入方式也是一样的：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("雪之下雪乃:你到得真早 -V1.ogg;\n对不起，等很久了吗？ -V2.ogg;\n")])])]),s("h3",{attrs:{id:"黑屏文字演示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#黑屏文字演示"}},[t._v("#")]),t._v(" 黑屏文字演示")]),t._v(" "),s("p",[t._v("在许多游戏中，会以黑屏显示一些文字，用来引入主题或表现人物的心理活动。你可以使用 intro 命令来演出独白：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("intro:回忆不需要适合的剧本，|反正一说出口，|都成了戏言。;\n")])])]),s("p",[t._v("独白的分拆以分隔符(|)来分割，也就是说，每一个 | 代表一个换行。在实际演出中，上面的文字会变成：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("回忆不需要适合的剧本，\n反正一说出口，\n都成了戏言。\n")])])]),s("h3",{attrs:{id:"改变背景-人物立绘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#改变背景-人物立绘"}},[t._v("#")]),t._v(" 改变背景/人物立绘")]),t._v(" "),s("p",[t._v("要让 WebGAL 能够读取背景图片和人物立绘，你的背景图片应该被放在 background 文件夹内，而立绘图片则应该放在 figure 文件夹中。")]),t._v(" "),s("p",[t._v("接下来，你可以通过以下简单的语句来改变当前显示的背景图片和人物立绘：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeBg:testBG03.jpg;//改变背景\nchangeFigure:testFigure02.png;//改变人物立绘\nchangeBg:none;//关闭背景\nchangeFigure:none;//关闭人物立绘\n")])])]),s("p",[t._v("你有可能会发现，在你改变背景图片或人物立绘后，你需要再点击一下鼠标才能显示下一条对话，如果你希望在改变背景图片/立绘后立即执行下一条语句的内容，请使用：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeBg:testBG03.jpg -next;\nchangeFigure:testFigure02.png -next;//改变人物立绘\n一色:谢谢学姐！;\n")])])]),s("p",[t._v("如果你这样做，那么在背景图片/立绘替换后，程序会立刻执行下一条语句。")]),t._v(" "),s("h3",{attrs:{id:"将立绘放在不同的位置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将立绘放在不同的位置"}},[t._v("#")]),t._v(" 将立绘放在不同的位置")]),t._v(" "),s("p",[t._v("现在，你可以在页面的三个不同位置放置不同的立绘，只需要在放置立绘的语句处加上你要放置的位置就可以了，示例如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeFigure:testFigure03.png -left;\nchangeFigure:testFigure04.png;\nchangeFigure:testFigure03.png -right;\n")])])]),s("p",[t._v("以上三行分别对应着左、中、右三个不同的位置。三个不同位置的立绘是相互独立的，所以如果你需要清除立绘，必须分别独立清除：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeFigure:none -left;\nchangeFigure:none;\nchangeFigure:none -right;\n")])])]),s("p",[t._v("如果你想要在立绘改变后立刻执行下一条语句，操作方法与之前一样，即加上参数 "),s("code",[t._v("-next")]),t._v(" :")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeFigure:testFigure03.png -left -next;\nchangeFigure:testFigure04.png -next;\nchangeFigure:testFigure03.png -right -next;\n")])])]),s("h3",{attrs:{id:"放置小头像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#放置小头像"}},[t._v("#")]),t._v(" 放置小头像")]),t._v(" "),s("p",[t._v("很多游戏可以在文本框的左下角放置小头像，以下是在本引擎中使用的语法：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("miniAvatar:minipic_test.png;//在左下角显示minipic_test.png\nminiAvatar:none;//关闭这个小头像\n")])])]),s("h3",{attrs:{id:"跳转场景与分支选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#跳转场景与分支选择"}},[t._v("#")]),t._v(" 跳转场景与分支选择")]),t._v(" "),s("p",[t._v("在 Galgame 中，跳转章节、场景与分支选择是不可或缺的，因此，本游戏模组也支持场景跳转与分支选择。")]),t._v(" "),s("p",[t._v("你可以将你的剧本拆分成多个 txt 文档，并使用一个简单的语句来切换当前运行的剧本。")]),t._v(" "),s("p",[t._v("假如你现在写了两个章节的剧本，分别是 Chapter-1.txt 与 Chapter-2.txt ，在 Chapter-1.txt 运行结束后，你希望跳转到\nChapter-2.txt 对应的场景，请使用以下语句：")]),t._v(" "),s("h4",{attrs:{id:"场景跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#场景跳转"}},[t._v("#")]),t._v(" 场景跳转")]),t._v(" "),s("p",[t._v("语句：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("changeScene:Chapter-2.txt;\n")])])]),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("(Chapter-1.txt)\n......\n......\nchangeScene:Chapter-2.txt;\n接下来执行的就是Chapter-2.txt的内容了。\n......\n......\n(Chapter-2.txt)\n")])])]),s("p",[t._v("通过执行这条命令，你将切换游戏场景，并使接下来的剧情发展按照新的场景剧本运行。新的剧本会在下一次鼠标点击后运行。")]),t._v(" "),s("h4",{attrs:{id:"场景调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#场景调用"}},[t._v("#")]),t._v(" 场景调用")]),t._v(" "),s("p",[t._v("如果你需要在执行完调用的场景后回到先前的场景（即父场景），你可以使用 "),s("code",[t._v("callScene")]),t._v(" 来调用场景")]),t._v(" "),s("p",[t._v("语句：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("callScene:Chapter-2.txt;\n")])])]),s("p",[t._v("示例：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("(Chapter-1.txt)\n......\n......\ncallScene:Chapter-2.txt;\n接下来执行的就是Chapter-2.txt的内容了。\n......\n......\n(Chapter-2.txt)\n......\n(Chapter-2.txt执行完毕)\n回父场景，继续执行父场景语句。\n......\n\n")])])]),s("h4",{attrs:{id:"分支选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分支选择"}},[t._v("#")]),t._v(" 分支选择")]),t._v(" "),s("p",[t._v("如果你的剧本存在分支选项，你希望通过选择不同的选项进入不同的章节，请使用以下语句：")]),t._v(" "),s("p",[t._v("其中，"),s("code",[t._v("|")]),t._v("是分隔符。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("choose:叫住她:Chapter-2.txt|回家:Chapter-3.txt;\n")])])]),s("p",[t._v("你只需要将选项的文本与选择选项后要进入的剧本名称一一对应起来，就可以实现分支选择的功能了。")]),t._v(" "),s("h3",{attrs:{id:"结束游戏并返回到标题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#结束游戏并返回到标题"}},[t._v("#")]),t._v(" 结束游戏并返回到标题")]),t._v(" "),s("p",[t._v("如果你想要在剧情结束后结束游戏并返回到标题，请使用：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("end;\n")])])]),s("p",[t._v("这样，就可以使游戏返回标题界面。")]),t._v(" "),s("h3",{attrs:{id:"引入背景音乐-bgm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入背景音乐-bgm"}},[t._v("#")]),t._v(" 引入背景音乐（BGM）")]),t._v(" "),s("p",[t._v("引入背景音乐的方法极其简单，你只需要将背景音乐放置在 /bgm 目录下，然后便可以简单地在需要的时候令其播放：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bgm:夏影.mp3;\n")])])]),s("h3",{attrs:{id:"播放一小段视频"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#播放一小段视频"}},[t._v("#")]),t._v(" 播放一小段视频")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("playVideo:OP.mp4//视频应该放在/game/video/ 文件夹内\n")])])]),s("h3",{attrs:{id:"解锁bgm或cg以供鉴赏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解锁bgm或cg以供鉴赏"}},[t._v("#")]),t._v(" 解锁BGM或CG以供鉴赏")]),t._v(" "),s("p",[t._v("在 WebGAL 4.2 中，加入了BGM和CG的鉴赏功能，你可以执行以下语句在适当的时机解锁BGM或CG。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("unlockCg:xgmain.jpeg -name=星光咖啡馆与死神之蝶 -series=1; // 解锁CG并赋予名称\nunlockBgm:s_Title.mp3 -name=Smiling-Swinging!!; // 解锁bgm并赋予名称\n")])])]),s("p",[t._v("其中，"),s("code",[t._v("series")]),t._v("参数可选，代表当前立绘属于哪个系列。同系列的立绘以后会合并展示（即展示成可以切换的同系列CG）。")]),t._v(" "),s("h3",{attrs:{id:"关闭文本框"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关闭文本框"}},[t._v("#")]),t._v(" 关闭文本框")]),t._v(" "),s("p",[t._v("有时候，为了一些特殊的演出效果，可能你希望临时关闭文本框，所以你可以使用以下指令：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setTextbox:hide;\n")])])]),s("p",[t._v("来关闭文本框。当 "),s("code",[t._v("setTextbox")]),t._v(" 指令的值为 "),s("code",[t._v("hide")]),t._v(" 时，会关闭文本框，且用户无法以任何方式打开。如果想要重新显示文本框，请再次调用此命令，并输入除"),s("code",[t._v("hide")]),t._v("以外的任意值。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setTextbox:on; // 可以是除 hide 以外的任意值。\n")])])]),s("h3",{attrs:{id:"使用动画效果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用动画效果"}},[t._v("#")]),t._v(" 使用动画效果")]),t._v(" "),s("h4",{attrs:{id:"为背景或立绘设置动画"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为背景或立绘设置动画"}},[t._v("#")]),t._v(" 为背景或立绘设置动画")]),t._v(" "),s("p",[t._v("使用语句 "),s("code",[t._v("setAnimation:动画名 -target=作用目标;")])]),t._v(" "),s("p",[s("strong",[t._v("示例：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setAnimation:enter-from-bottom -target=fig-center -next;//为中间立绘设置一个从下方进入的动画，并转到下一句。\n")])])]),s("p",[t._v("目前，预制的动画有：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("动画效果")]),t._v(" "),s("th",[t._v("动画名")]),t._v(" "),s("th",[t._v("持续时间（毫秒）")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("渐入")]),t._v(" "),s("td",[t._v("enter")]),t._v(" "),s("td",[t._v("300")])]),t._v(" "),s("tr",[s("td",[t._v("渐出")]),t._v(" "),s("td",[t._v("exit")]),t._v(" "),s("td",[t._v("300")])]),t._v(" "),s("tr",[s("td",[t._v("左右摇晃一次")]),t._v(" "),s("td",[t._v("shake")]),t._v(" "),s("td",[t._v("1000")])]),t._v(" "),s("tr",[s("td",[t._v("从下侧进入")]),t._v(" "),s("td",[t._v("enter-from-bottom")]),t._v(" "),s("td",[t._v("500")])]),t._v(" "),s("tr",[s("td",[t._v("从左侧进入")]),t._v(" "),s("td",[t._v("enter-from-right")]),t._v(" "),s("td",[t._v("500")])]),t._v(" "),s("tr",[s("td",[t._v("从右侧进入")]),t._v(" "),s("td",[t._v("enter-from-right")]),t._v(" "),s("td",[t._v("500")])]),t._v(" "),s("tr",[s("td",[t._v("前后移动一次")]),t._v(" "),s("td",[t._v("move-front-and-back")]),t._v(" "),s("td",[t._v("1000")])])])]),t._v(" "),s("p",[t._v("目前，动画的作用目标有：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("target")]),t._v(" "),s("th",[t._v("实际目标")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("fig-left")]),t._v(" "),s("td",[t._v("左立绘")])]),t._v(" "),s("tr",[s("td",[t._v("fig-center")]),t._v(" "),s("td",[t._v("中间立绘")])]),t._v(" "),s("tr",[s("td",[t._v("fig-right")]),t._v(" "),s("td",[t._v("右侧立绘")])]),t._v(" "),s("tr",[s("td",[t._v("bg-main")]),t._v(" "),s("td",[t._v("背景")])])])]),t._v(" "),s("p",[t._v("随着今后版本自定义立绘和背景的加入，将可以设定立绘或背景的 id 作为目标。")]),t._v(" "),s("h4",{attrs:{id:"自定义动画"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义动画"}},[t._v("#")]),t._v(" 自定义动画")]),t._v(" "),s("p",[t._v("动画文件在"),s("code",[t._v("/game/animation")]),t._v("，你可以创建自己的自定义动画。")]),t._v(" "),s("p",[t._v("动画文件使用 JSON 描述，你可以在 "),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Objects/JSON",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文档"),s("OutboundLink")],1),t._v(" 参考JSON语法。")]),t._v(" "),s("p",[t._v("每一个动画文件都代表一个"),s("strong",[t._v("动画序列")]),t._v("，使用一个JSON数组来描述。下面是一个示例，描述了一个从左侧进入的动画：")]),t._v(" "),s("p",[s("code",[t._v("enter-from-left.json")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alpha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scale"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pivot"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"position"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("-50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rotation"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"blur"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"duration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alpha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scale"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pivot"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"position"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rotation"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"blur"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"duration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n")])])]),s("p",[t._v("其中各个属性代表的释义为：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("属性名")]),t._v(" "),s("th",[t._v("释义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("alpha")]),t._v(" "),s("td",[t._v("透明度，范围0-1")])]),t._v(" "),s("tr",[s("td",[t._v("scale")]),t._v(" "),s("td",[t._v("缩放")])]),t._v(" "),s("tr",[s("td",[t._v("pivot")]),t._v(" "),s("td",[t._v("锚点")])]),t._v(" "),s("tr",[s("td",[t._v("position")]),t._v(" "),s("td",[t._v("位置偏移")])]),t._v(" "),s("tr",[s("td",[t._v("rotation")]),t._v(" "),s("td",[t._v("旋转角度，单位为弧度")])]),t._v(" "),s("tr",[s("td",[t._v("blur")]),t._v(" "),s("td",[t._v("高斯模糊半径")])]),t._v(" "),s("tr",[s("td",[t._v("duration")]),t._v(" "),s("td",[t._v("这个时间片的持续时间，单位为毫秒(ms)")])])])]),t._v(" "),s("p",[t._v("然后，你需要在 "),s("code",[t._v("animationTable")]),t._v("中加上你的自定义动画的文件名（不需要后缀名）")]),t._v(" "),s("p",[t._v("在文件"),s("code",[t._v("animationTable.json")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enter-from-left"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enter-from-bottom"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enter-from-right"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("然后，你就可以在脚本中调用：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setAnimation:enter-from-left -target=fig-left -next;\n")])])]),s("h4",{attrs:{id:"省略部分属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#省略部分属性"}},[t._v("#")]),t._v(" 省略部分属性")]),t._v(" "),s("p",[t._v("如果你的动画只需要操作部分属性，你可以将其他不参与动画的属性留空，使它们保持默认：")]),t._v(" "),s("p",[s("strong",[t._v("示例："),s("code",[t._v("enter.json")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alpha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"duration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alpha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"duration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n")])])]),s("h4",{attrs:{id:"使用变换"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用变换"}},[t._v("#")]),t._v(" 使用变换")]),t._v(" "),s("p",[t._v("一个持续时间为0毫秒，且只有一个时间片的动画就是变换。")]),t._v(" "),s("p",[s("strong",[t._v("示例：")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[\n  {\n    "alpha": 0,\n    "duration": 0\n  }\n]\n')])])]),s("h3",{attrs:{id:"添加特效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加特效"}},[t._v("#")]),t._v(" 添加特效")]),t._v(" "),s("p",[t._v("目前，WebGAL 的特效系统由 PixiJS 实现。")]),t._v(" "),s("h4",{attrs:{id:"初始化-pixi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化-pixi"}},[t._v("#")]),t._v(" 初始化 Pixi")]),t._v(" "),s("p",[s("code",[t._v("pixiInit")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pixiInit;\n")])])]),s("p",[s("strong",[t._v("注意：")])]),t._v(" "),s("p",[s("strong",[t._v("1.如果你要使用特效，那么你必须先运行这个命令来初始化 Pixi。")])]),t._v(" "),s("p",[s("strong",[t._v("2.如果你想要消除已经作用的效果，你可以使用这个语法来清空效果。")])]),t._v(" "),s("h4",{attrs:{id:"添加特效-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加特效-2"}},[t._v("#")]),t._v(" 添加特效")]),t._v(" "),s("p",[s("code",[t._v("pixiPerform")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pixiPerform:rain;//添加一个下雨的特效\n")])])]),s("p",[t._v("注意：特效作用后，如果没有初始化，特效会一直运行。")]),t._v(" "),s("h4",{attrs:{id:"预制特效列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#预制特效列表"}},[t._v("#")]),t._v(" 预制特效列表")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("效果")]),t._v(" "),s("th",[t._v("指令")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("下雨")]),t._v(" "),s("td",[t._v("pixiPerform:rain;")])]),t._v(" "),s("tr",[s("td",[t._v("下雪")]),t._v(" "),s("td",[t._v("pixiPerform:snow;")])])])]),t._v(" "),s("h4",{attrs:{id:"叠加特效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#叠加特效"}},[t._v("#")]),t._v(" 叠加特效")]),t._v(" "),s("p",[t._v("如果你想要叠加两种及以上效果，你可以在不使用"),s("code",[t._v("pixiInit")]),t._v("指令的情况下叠加不同的效果。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pixiPerform:rain;\npixiPerform:snow;\n")])])]),s("h4",{attrs:{id:"清除已叠加的特效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#清除已叠加的特效"}},[t._v("#")]),t._v(" 清除已叠加的特效")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("pixiInit")]),t._v("来初始化，这样可以消除所有已经应用的效果。")]),t._v(" "),s("h4",{attrs:{id:"电影模式-测试功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#电影模式-测试功能"}},[t._v("#")]),t._v(" 电影模式（测试功能）")]),t._v(" "),s("p",[t._v("通过执行脚本"),s("code",[t._v("filmMode:enable;")]),t._v("来开启电影模式，"),s("code",[t._v("filmMode:none;")]),t._v("可以关闭。")]),t._v(" "),s("h2",{attrs:{id:"进阶教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进阶教程"}},[t._v("#")]),t._v(" 进阶教程：")]),t._v(" "),s("h3",{attrs:{id:"在同一个场景-txt-文件-内实现语句跳转、分支跳转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在同一个场景-txt-文件-内实现语句跳转、分支跳转"}},[t._v("#")]),t._v(" 在同一个场景（TXT 文件）内实现语句跳转、分支跳转")]),t._v(" "),s("p",[t._v("如果你想要创建一个分支，但是却觉得为此新建一个 TXT 文件太麻烦，你可以尝试使用以下方式在同一文件内实现创建分支和跳转语句。")]),t._v(" "),s("p",[s("strong",[t._v("注意：如果你的分支很长，我不建议你使用这种方式，因为一个 TXT 的行数不适宜太长，否则可能会导致加载慢、响应迟钝等性能问题。")])]),t._v(" "),s("h4",{attrs:{id:"首先-你必须理解如何使用-label"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#首先-你必须理解如何使用-label"}},[t._v("#")]),t._v(" 首先，你必须理解如何使用 label")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("......\njumpLabel:label_1;\n//以下这些行会被忽略:\n......\n......\n......\n//然后，你需要创建label:\nlabel:label_1;\n然后，程序会在这里继续执行。;\n......\n......\n")])])]),s("p",[t._v("简而言之， jumpLabel 类似于 goto 语句，能够立刻让你的剧本跳到场景（TXT 文件）中的任意一个位置，而这个位置需要你用 label 创建。")]),t._v(" "),s("p",[t._v("如果把 jumpLabel 比作任意门，那么这个任意门的终点就是 label 所在的位置。")]),t._v(" "),s("h4",{attrs:{id:"有了上面的基础-你就可以通过-choose-来实现用分支来跳转到-label-所在的位置了"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#有了上面的基础-你就可以通过-choose-来实现用分支来跳转到-label-所在的位置了"}},[t._v("#")]),t._v(" 有了上面的基础，你就可以通过 choose 来实现用分支来跳转到 label 所在的位置了：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("WebGAL:让我们来测试分支跳转到label！;\nchoose:测试1:label_1|测试2:label_2;\nlabel:label_1;\n现在应该是1号分支;\njumpLabel:end;\nlabel:label_2;\n现在应该是2号分支;\njumpLabel:end;\nlabel:end;\n现在是统一的结束;\n")])])]),s("p",[t._v("注意，在每个分支的结尾，你应该用 jumpLabel 来跳转到你希望的位置。由于程序是线性执行的，所以如果你没有在分支的结束跳转，那么程序会继续往下运行，比如说：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("WebGAL:让我们来测试分支跳转到label！;\nchoose:测试1:label_1|测试2:label_2;\nlabel:label_1;\n现在应该是1号分支;\nlabel:label_2;\n现在应该是2号分支;\n现在是统一的结束;\n")])])]),s("p",[t._v("在这个剧本中，如果你选择了分支 2，那么一切看起来好像没有问题。但是如果你选择了分支 1，你会惊讶地发现，在分支 1 执行完后，竟然分支\n2 又执行了一遍。那是因为程序按顺序继续执行下一行了，而你没有指定在分支结束后跳到哪里。")]),t._v(" "),s("h3",{attrs:{id:"使用变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用变量"}},[t._v("#")]),t._v(" 使用变量")]),t._v(" "),s("p",[s("strong",[t._v("注意：在你弄清楚如何使用 label，如何在 label 内部跳转场景之前，请不要轻易使用变量系统，这可能会令你感到迷惑！")])]),t._v(" "),s("p",[t._v("设置变量：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setVar:a=1; // 可以设置数字\nsetVar:a=true // 可以设置布尔值\nsetVar:a=人物名称 // 可以设置字符串\n")])])]),s("p",[t._v("如果先前你定义过其他变量，也可以在设置变量时使用。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setVar:a=1;\nsetVar:b=a+1;\n")])])]),s("h3",{attrs:{id:"条件执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#条件执行"}},[t._v("#")]),t._v(" 条件执行")]),t._v(" "),s("p",[t._v("在语句后加上 "),s("code",[t._v("-when=(condition)")]),t._v(" 参数，可以根据条件判断当前语句是否要执行。")]),t._v(" "),s("p",[t._v("例如：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("setVar:a=1;\nchangeScene:2.txt -when=a>1; // a>1时跳转到场景2\nchangeScene:3.txt; // 如果a<=1，那么上面的语句不执行，自然就执行这一句了。\n")])])]),s("p",[t._v("任何语句都可以加上 "),s("code",[t._v("-when")]),t._v(" 参数来控制是否执行。通过组合 "),s("code",[t._v("-when")]),t._v(" 参数和 "),s("code",[t._v("jumpLabel")]),t._v(" "),s("code",[t._v("callScene")]),t._v(" "),s("code",[t._v("changeScene")]),t._v("\n，你可以实现带条件判断的流程控制。")]),t._v(" "),s("h3",{attrs:{id:"在一句对话中加入演出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在一句对话中加入演出"}},[t._v("#")]),t._v(" 在一句对话中加入演出")]),t._v(" "),s("p",[t._v("有时候，可能你希望在某一句对话执行到某个阶段时加入演出效果，比如切换表情等。\n这时候，你可以使用 "),s("code",[t._v("-notend")]),t._v(" "),s("code",[t._v("-concat")]),t._v(" 参数来实现在对话中插入任意语句。")]),t._v(" "),s("p",[s("code",[t._v("-concat")]),t._v(" 代表本句对话连接在上一句对话之后")]),t._v(" "),s("p",[s("code",[t._v("-notend")]),t._v(" 代表本句对话没有结束，在后面可能连接演出或对话。")]),t._v(" "),s("p",[t._v("示例如下：这是一个在对话进行中切换立绘的演示。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("WebGAL:测试语句插演出！马上切换立绘...... -notend;\nchangeFigure:k1.png -next;\n切换立绘！马上切换表情...... -notend -concat;\nchangeFigure:k2.png -next;\n切换表情！ -concat;\n")])])]),s("h3",{attrs:{id:"添加自定义特效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加自定义特效"}},[t._v("#")]),t._v(" 添加自定义特效")]),t._v(" "),s("p",[t._v("你可以下载源代码，然后找到 /Core/gameScripts/pixiPerformScripts/ 然后新建一个 "),s("code",[t._v("PIXI.Container")]),t._v("用于制作你所需要的特效。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" effectsContainer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME_GAMEPLAY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pixiStage"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("effectsContainer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取当前的 Pixi 效果 Container")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("RUNTIME_GAMEPLAY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pixiStage"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentApp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用 Pixi App 的方式，对确定屏幕尺寸等可能有用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" container "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PIXI")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Container")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//创建自定义特效的container")]),t._v("\neffectsContainer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加特效")]),t._v("\n")])])]),s("p",[t._v("纹理文件可以放在 /game/tex 目录下。")]),t._v(" "),s("p",[t._v("然后，在 /Core/gameScripts/pixi.ts 中加上你写的新特效。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sentence"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rain'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pixiRain")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      container "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tickerKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tickerKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'snow'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n      res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pixiSnow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      container "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("container"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      tickerKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tickerKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("最后，编译出支持你自定义特效的 WebAPP")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" run build"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("这样，你就可以在脚本中调用你的特效了")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("pixiPerform:你的新特效;\n")])])]),s("h2",{attrs:{id:"可能遇到的问题与解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可能遇到的问题与解决方案"}},[t._v("#")]),t._v(" 可能遇到的问题与解决方案")]),t._v(" "),s("h2",{attrs:{id:"stargazers-over-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stargazers-over-time"}},[t._v("#")]),t._v(" Stargazers over time")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://starchart.cc/MakinoharaShoko/WebGAL",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://starchart.cc/MakinoharaShoko/WebGAL.svg",alt:"Stargazers over time"}}),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=r.exports}}]);